<template>
  <view class="container">
    <!-- é¡¶éƒ¨å¤§å›¾å’Œæ ‡é¢˜ï¼ˆè½®æ’­å›¾ï¼‰ -->
    <view class="header">
      <swiper class="header-swiper" circular autoplay interval="4000" duration="500">
        <swiper-item v-for="(img, idx) in headerImgs" :key="idx">
          <image class="header-img" :src="img" mode="aspectFill"></image>
        </swiper-item>
      </swiper>
    </view>

    <!-- é¡»çŸ¥æç¤ºæ  -->
    <view class="notice-bar">
      <text class="notice-icon">ğŸ””</text>
      <text class="notice-text">æ•…å®«åšç‰©é™¢å‚è§‚é¡»çŸ¥</text>
      <text class="notice-arrow">&gt;</text>
    </view>

    <!-- ä¿¡æ¯åŒºå— -->
    <view class="info-area">
      <text class="museum-title">æ•…å®«åšç‰©é™¢</text>
      <text class="museum-desc">æ—ºå­£ï¼šå¼€æ”¾å…¥é¦†æ—¶é—´08:30 | åœæ­¢å…¥é¦†æ—¶é—´16:00 | é—­é¦†æ—¶é—´17:00 çå®é¦†ã€é’Ÿè¡¨é¦†åœæ­¢å…¥é¦†æ—¶é—´16:10</text>
      <view class="card-row">
        <view class="card card-red" @click="goTicket">
          <text class="card-title">è´­ç¥¨çº¦å±• &gt;</text>
          <text class="card-desc">å¤§é—¨ç¥¨ã€ä¸¤é¦†ã€å±•è§ˆé¢„çº¦</text>
        </view>
        <view class="card card-yellow" @click="goYearTicket">
          <text class="card-title">å¹´ç¥¨å‚è§‚ç™»è®° &gt;</text>
        </view>
      </view>
    </view>

    <!-- åº•éƒ¨å¯¼èˆªæ  -->
<!--    <CustomTabbar current="home" /> -->
  </view>
</template>

<script>
import CustomTabbar from '@/components/CustomTabbar.uvue';
import http from '@/static/script/http.js';

export default {
  components: { CustomTabbar },
  data() {
    return {
      headerImgs: []
    };
  },
  created() {
    this.fetchCarouselData();
  },
  methods: {
    async fetchCarouselData() {
      try {
        const res = await http.request({
          url: 'http://localhost:8080/api/carousel',
          method: 'GET'
        });
        this.headerImgs = res.map(item => `http://localhost:8080${item.imageUrl}`);
      } catch (error) {
        console.error('è·å–è½®æ’­å›¾æ•°æ®å¤±è´¥:', error);
        // å¤±è´¥æ—¶ä½¿ç”¨é»˜è®¤å›¾ç‰‡
        this.headerImgs = [
          '/static/15504e23b35ed72b618c28b728938e9.jpg',
          '/static/4fa1274f11d0fea8434c8736fb5beea.jpg',
          '/static/0416e24704d4f7209e85f1417af9654.jpg'
        ];
      }
    },
    goTicket() {
      // è·³è½¬åˆ°è´­ç¥¨é¡µé¢ï¼ˆè¯·æ ¹æ®å®é™…é¡µé¢è·¯å¾„è°ƒæ•´ï¼‰
      uni.navigateTo({ url: '/pages/ticket/index' });
    },
    goYearTicket() {
      // è·³è½¬åˆ°å¹´ç¥¨å‚è§‚ç™»è®°é¡µé¢ï¼ˆè¯·æ ¹æ®å®é™…é¡µé¢è·¯å¾„è°ƒæ•´ï¼‰
      uni.navigateTo({ url: '/pages/year-ticket/index' });
    }
  }
};
</script>

<style >
@import url(/static/style/index.css);
</style>
